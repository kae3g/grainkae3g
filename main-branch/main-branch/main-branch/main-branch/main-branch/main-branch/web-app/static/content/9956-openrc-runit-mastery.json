{
  "slug" : "9956-openrc-runit-mastery",
  "meta" : {
    "slug" : "9956-openrc-runit-mastery",
    "title" : "kae3g 9956: The Training Grounds — OpenRC and runit Hands-On Mastery",
    "filename" : "9956-openrc-runit-mastery.md",
    "source-dir" : "hidden"
  },
  "html" : "<h1>kae3g 9956: The Training Grounds — OpenRC and runit Hands-On Mastery</h1><p><strong>Timestamp:</strong> 12025-10-10&ndash;rhizome-valley<br /> <strong>Series:</strong> Rhizome Valley Chronicles<br /> <strong>Category:</strong> Init Systems, Service Supervision, Practical Skills<br /> <strong>Reading Time:</strong> 35 minutes</p><blockquote><p> <strong>\"Theory is beautiful. Proofs are elegant. Compilers are reassuring. But there's nothing quite like the moment your hands touch real metal, real code, real production systems. This is where you become a builder.\"</strong> <h2></h2></p></blockquote><h2>The Practice Field</h2><p><em>We've met visionaries—the Gentle Gardener, the Proof-Keeper, the Rust Blacksmith. We've learned philosophies, examined architectures, marveled at innovations.</em></p><p><em>Now we stand in the valley's <strong>Training Grounds</strong>, where the Pragmatic Pioneer—an old Unix hand with decades of battle scars—waits with a knowing smile.</em></p><p><em>\"Enough talk,\" he says, rolling up his sleeves. \"You've seen the future (seL4, Redox). Now let me show you what actually runs on millions of servers TODAY. Let me show you OpenRC and runit—the tools that just work, day after day, year after year.\"</em></p><p><em>He gestures to a workbench covered in hardware. \"That Framework laptop from essay 9958? Today you're going to install Artix or Void Linux on it. And you're going to manage services with tools that won't fight you, won't surprise you, won't mysteriously break at 3 AM.\"</em></p><h2>The Question Every Practitioner Asks</h2><p>*How do I actually USE OpenRC and runit to manage services on a real Linux system? Not theory. Not diagrams. **Real commands. Real configurations. Real troubleshooting.***</p><h2>Introduction: From Theory to Mastery</h2><p>In <a href='9951-init-systems-landscape'>9951</a> you learned ABOUT init systems—the orchestra metaphor, the landscape, the philosophy.<br /> Now you learn to <strong>conduct the orchestra yourself</strong>—hands-on, on real hardware.<h2></h2></p><h2>Part I: OpenRC Deep Dive — The Gentle Conductor's Score</h2><p><em>The Pragmatic Pioneer picks up a service script, weathered from years of use.</em></p><p><em>\"OpenRC,\" he explains, \"is like sheet music for a gentle orchestra conductor. Each service is a score—clear instructions that anyone can read, modify, and understand. No binary magic. No hidden complexity. Just bash scripts doing exactly what they say.\"</em></p><h3>Service Script Anatomy: Reading the Score</h3><pre><code class=\"bash\">#!/sbin/openrc-run\n\nname=&quot;my-app&quot;\ncommand=&quot;/usr/bin/my-app&quot;\ncommand&#95;args=&quot;--config /etc/my-app.conf&quot;\ncommand&#95;user=&quot;appuser:appgroup&quot;\n\ndepend&#40;&#41; {\n  need net\n  use dns logger\n  after firewall\n}\n\nstart&#95;pre&#40;&#41; {\n  checkpath --directory --owner $command&#95;user /var/run/my-app\n}\n</code></pre><h3>Hands-On Exercise</h3><pre><code class=\"bash\"># Create service on Artix Linux &#40;from 9958&#41;\nsudo vim /etc/init.d/hello-service\n\n# Make executable\nsudo chmod +x /etc/init.d/hello-service\n\n# Add to default runlevel\nsudo rc-update add hello-service default\n\n# Start service\nsudo rc-service hello-service start\n\n# Check status\nsudo rc-status\n</code></pre><h2></h2><h2>Part II: runit Deep Dive</h2><h3>Service Directory Structure</h3><pre><code class=\"bash\">/etc/sv/my-service/\n  ├── run         # Start script\n  ├── finish      # Cleanup after exit\n  └── log/\n      └── run     # Logging script\n</code></pre><h3>Example Service</h3><pre><code class=\"bash\"># /etc/sv/myapp/run\n#!/bin/sh\nexec 2&gt;&amp;1\nexec chpst -u myapp:myapp /usr/bin/myapp --config /etc/myapp.conf\n\n# /etc/sv/myapp/log/run\n#!/bin/sh\nexec chpst -u log:log svlogd -tt /var/log/myapp\n</code></pre><h3>Hands-On Exercise</h3><pre><code class=\"bash\"># Create service\nsudo mkdir -p /etc/sv/myapp/log\nsudo vim /etc/sv/myapp/run\nsudo vim /etc/sv/myapp/log/run\nsudo chmod +x /etc/sv/myapp/run /etc/sv/myapp/log/run\n\n# Enable\nsudo ln -s /etc/sv/myapp /run/runit/service/\n\n# Control\nsudo sv up myapp      # Start\nsudo sv down myapp    # Stop\nsudo sv restart myapp # Restart\nsudo sv status myapp  # Check status\n</code></pre><h2></h2><h2>Part III: Real-World Stack (db → app → web)</h2><h3>PostgreSQL Service (runit)</h3><pre><code class=\"bash\"># /etc/sv/postgresql/run\n#!/bin/sh\nexec 2&gt;&amp;1\nexec chpst -u postgres:postgres /usr/bin/postgres -D /var/lib/postgresql/data\n</code></pre><h3>Application Service</h3><pre><code class=\"bash\"># /etc/sv/myapp/run\n#!/bin/sh\nexec 2&gt;&amp;1\n# Wait for PostgreSQL\nsv check postgresql || exit 1\nexec chpst -u myapp:myapp /usr/local/bin/myapp\n</code></pre><h3>Nginx Service</h3><pre><code class=\"bash\"># /etc/sv/nginx/run\n#!/bin/sh\nexec 2&gt;&amp;1\nexec /usr/sbin/nginx -g 'daemon off;'\n</code></pre><p><strong>Exercise:</strong> Deploy this stack on your Framework laptop, test dependencies, observe supervision.<h2></h2></p><h2>Conclusion: The Pragmatic Pioneer's Wisdom</h2><p><em>As the sun sets on the Training Grounds, the Pragmatic Pioneer wipes oil from his hands and surveys the workbench—now covered with successfully configured services, running processes, cleanly supervised daemons.</em></p><p><em>\"You've learned the theories from the Wise Elders,\" he says, his voice carrying the weight of experience. \"You've seen the visions from the Proof-Keeper and the Rust Blacksmith. But now you've got something more valuable: <strong>dirty hands and working systems</strong>.\"</em></p><p><em>He points to the Framework laptop, now running Artix with OpenRC humming quietly. \"This is what thousands of servers run. This is what survives 3 AM emergencies. This is what you can debug with nothing but grep and a text editor. No magic. No mystery. Just solid, understandable tools.\"</em></p><p><em>SixOS nods approvingly. \"And notice—s6, the heart of my system, is just an evolution of these principles. Same philosophy, refined over years of production use.\"</em></p><h3>Your Hands-On Mastery</h3><p>You now have <strong>real experience</strong> with:</p><ul><li>✓ OpenRC service scripts (bash-based, readable, debuggable)</li><li>✓ runit supervision (directory-based, elegant, minimal)</li><li>✓ Dependency management (need/use/after for OpenRC, sv dependencies for runit)</li><li>✓ Logging patterns (readable text logs, no binary mysteries)</li><li>✓ Production troubleshooting (tools that work when everything else fails)</li></ul><p><strong>The bridge awaits:</strong> <a href='9957-rust-supervision-frameworks'>9957</a> — Build modern supervision in Rust, combining old wisdom with new safety<h2></h2></p><p><strong>Next Writing:</strong> <a href='9957-rust-supervision-frameworks'>9957-rust-supervision-frameworks</a> — Rust-Based Init and Supervision<br /> <strong>Previous Writing:</strong> <a href='9955-redox-os-rust-microkernel'>9955-redox-os-rust-microkernel</a> — Redox OS<h2></h2></p><p><em>\"The master has failed more times than the beginner has even tried.\"</em><br /> — Stephen McCranie</p><p><em>In the valley, we learn by doing. Theory guides us, but practice makes us builders.</em><h2></h2></p><p><a href='/12025-10/'>View All Essays</a></p><h2></h2><p><div style=\"text-align: center; opacity: 0.6; font-size: 0.85em; margin-top: 3em; padding-top: 1em; border-top: 1px solid rgba(139, 116, 94, 0.2);\"></p><p><strong>Copyright © 2025 <a href='https://codeberg.org/kae3g/12025-10/'>kae3g</a></strong> | Dual-licensed under <a href='https://www.apache.org/licenses/LICENSE-2.0'>Apache-2.0</a> / <a href='https://opensource.org/licenses/MIT'>MIT</a><br /> Competitive technology in service of clarity and beauty</p><p></div></p><p><em><a href='/12025-10/hidden-docs-index.html'>View Hidden Docs Index</a></em> | <em><a href='/12025-10/'>Return to Main Index</a></em></p>",
  "hash" : "2025-10-22T15:17:39.430088902Z-6867"
}