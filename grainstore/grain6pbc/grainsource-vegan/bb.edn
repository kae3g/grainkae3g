{:paths ["src" "scripts" "template" "personal"]
 :deps {}
 :tasks
 {:requires ([babashka.process :refer [shell]]
             [clojure.string :as str]
             [clojure.java.io :as io])
  
  ;; Core vegan-friendly rewrite functionality
  vegan-rewrite
  {:doc "Apply comprehensive vegan-friendly terminology rewrite across all file types"
   :requires ([babashka.process :refer [shell]]
              [clojure.string :as str])
   :task (do
           (println "ğŸŒ± grainsource-vegan: Applying comprehensive vegan-friendly rewrite...")
           (println "")
           (println "ğŸ“ Processing .md files...")
           (shell "find . -name '*.md' -exec sed -i 's/master/primary/g; s/slave/secondary/g; s/blacklist/blocklist/g; s/whitelist/allowlist/g; s/eggs/seeds/g; s/omelette/frittata/g; s/meat/grain/g; s/beef/wheat/g; s/pork/corn/g; s/chicken/rice/g; s/fish/bean/g; s/dairy/plant/g; s/milk/juice/g; s/cheese/nut/g; s/animal/plant/g; s/cow/tree/g; s/pig/vine/g' {} +")
           (println "âœ… .md files processed")
           (println "")
           (println "ğŸ“ Processing .clj files...")
           (shell "find . -name '*.clj' -exec sed -i 's/master/primary/g; s/slave/secondary/g; s/blacklist/blocklist/g; s/whitelist/allowlist/g; s/eggs/seeds/g; s/omelette/frittata/g; s/meat/grain/g; s/beef/wheat/g; s/pork/corn/g; s/chicken/rice/g; s/fish/bean/g; s/dairy/plant/g; s/milk/juice/g; s/cheese/nut/g; s/animal/plant/g; s/cow/tree/g; s/pig/vine/g' {} +")
           (println "âœ… .clj files processed")
           (println "")
           (println "ğŸ“ Processing .html files...")
           (shell "find . -name '*.html' -exec sed -i 's/master/primary/g; s/slave/secondary/g; s/blacklist/blocklist/g; s/whitelist/allowlist/g; s/eggs/seeds/g; s/omelette/frittata/g; s/meat/grain/g; s/beef/wheat/g; s/pork/corn/g; s/chicken/rice/g; s/fish/bean/g; s/dairy/plant/g; s/milk/juice/g; s/cheese/nut/g; s/animal/plant/g; s/cow/tree/g; s/pig/vine/g' {} +")
           (println "âœ… .html files processed")
           (println "")
           (println "ğŸ“ Processing .bb files...")
           (shell "find . -name '*.bb' -exec sed -i 's/master/primary/g; s/slave/secondary/g; s/blacklist/blocklist/g; s/whitelist/allowlist/g; s/eggs/seeds/g; s/omelette/frittata/g; s/meat/grain/g; s/beef/wheat/g; s/pork/corn/g; s/chicken/rice/g; s/fish/bean/g; s/dairy/plant/g; s/milk/juice/g; s/cheese/nut/g; s/animal/plant/g; s/cow/tree/g; s/pig/vine/g' {} +")
           (println "âœ… .bb files processed")
           (println "")
           (println "ğŸŒ± Vegan-friendly rewrite complete!")
           (println "ğŸŒ¾ Plant-based development philosophy applied throughout"))}

  ;; Template/personal separation management
  template-setup
  {:doc "Set up template/personal separation for grainsource-vegan"
   :task (do
           (println "ğŸŒ± Setting up template/personal separation...")
           (shell "mkdir" "-p" "template" "personal")
           (when (.exists (io/file "template/config.edn"))
             (shell "cp" "template/config.edn" "personal/config.edn"))
           (println "âœ… Template/personal separation ready"))}

  ;; 6os grainclay deployment
  deploy-6os
  {:doc "Deploy grainsource-vegan to 6os grainclay system"
   :requires ([babashka.process :refer [shell]]
              [clojure.string :as str])
   :task (do
           (println "ğŸŒ± Deploying grainsource-vegan to 6os grainclay...")
           (println "")
           (println "1ï¸âƒ£ Building grainsource-vegan...")
           (shell "bb" "uberjar")
           (println "âœ… Build complete")
           (println "")
           (println "2ï¸âƒ£ Deploying to 6os grainclay...")
           (shell "cp" "-r" "." "../6oskae3g/grainstore/grain6pbc/grainsource-vegan/")
           (println "âœ… Deployed to 6os grainclay")
           (println "")
           (println "3ï¸âƒ£ Updating 6os grainclay configuration...")
           (shell "cd" "../6oskae3g" "&&" "git" "add" "-A" "&&" "git" "commit" "-m" "feat: deploy grainsource-vegan to 6os grainclay system")
           (println "âœ… 6os grainclay updated")
           (println "")
           (println "ğŸŒ± grainsource-vegan deployment to 6os grainclay complete!"))}

  ;; Integration with qb draw flow
  qb-integration
  {:doc "Integrate grainsource-vegan with qb draw flow pipeline"
   :requires ([babashka.process :refer [shell]]
              [clojure.string :as str])
   :task (do
           (println "ğŸŒ± Integrating grainsource-vegan with qb draw flow...")
           (println "")
           (println "1ï¸âƒ£ Updating qb draw flow pipeline...")
           (shell "cd" "../../grainbarrel" "&&" "bb" "vegan-rewrite")
           (println "âœ… qb draw flow updated")
           (println "")
           (println "2ï¸âƒ£ Testing integration...")
           (shell "cd" "../../grainbarrel" "&&" "bb" "qb-draw-flow" "test: grainsource-vegan integration")
           (println "âœ… Integration test complete")
           (println "")
           (println "ğŸŒ± grainsource-vegan integration with qb draw flow complete!"))}

  ;; Complete workflow
  flow
  {:doc "Complete grainsource-vegan workflow: template setup, vegan rewrite, 6os deployment, qb integration"
   :requires ([babashka.process :refer [shell]]
              [clojure.string :as str])
   :task (do
           (println "ğŸŒ± grainsource-vegan complete workflow...")
           (println "")
           (println "1ï¸âƒ£ Setting up template/personal separation...")
           (shell "bb" "template-setup")
           (println "")
           (println "2ï¸âƒ£ Applying vegan-friendly rewrite...")
           (shell "bb" "vegan-rewrite")
           (println "")
           (println "3ï¸âƒ£ Deploying to 6os grainclay...")
           (shell "bb" "deploy-6os")
           (println "")
           (println "4ï¸âƒ£ Integrating with qb draw flow...")
           (shell "bb" "qb-integration")
           (println "")
           (println "ğŸŒ± grainsource-vegan complete workflow finished!")
           (println "ğŸŒ¾ Plant-based development philosophy applied throughout")
           (println "ğŸŒ¾ Multi-chain sovereignty maintained")
           (println "ğŸŒ¾ now == next + 1"))}

  ;; Default task
  :default (fn [& args]
             (println "ğŸŒ± grainsource-vegan - Plant-based development utility")
             (println "")
             (println "Available tasks:")
             (println "  bb vegan-rewrite    - Apply vegan-friendly terminology")
             (println "  bb template-setup   - Set up template/personal separation")
             (println "  bb deploy-6os       - Deploy to 6os grainclay system")
             (println "  bb qb-integration   - Integrate with qb draw flow")
             (println "  bb flow             - Complete workflow")
             (println "")
             (println "ğŸŒ¾ Plant-based development philosophy")
             (println "ğŸŒ¾ Multi-chain sovereignty principles")
             (println "ğŸŒ¾ now == next + 1"))}}
