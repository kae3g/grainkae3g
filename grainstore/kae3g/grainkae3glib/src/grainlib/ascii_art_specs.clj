(ns grainlib.ascii-art-specs
  "
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘                                                                           â•‘
  â•‘    â–‘â–’â–“â–ˆ  G R A I N L I B   A S C I I   A R T   S P E C S  â–ˆâ–“â–’â–‘          â•‘
  â•‘                                                                           â•‘
  â•‘         ğŸŒ¾ Clojure Spec meets Basho Poetry meets Emoji Art ğŸŒ¾            â•‘
  â•‘                                                                           â•‘
  â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â•‘
  â•‘    â”‚  'old pond...'                                              â”‚       â•‘
  â•‘    â”‚  'a frog leaps in'                                          â”‚       â•‘
  â•‘    â”‚  'water's sound!'                                           â”‚       â•‘
  â•‘    â”‚                                                             â”‚       â•‘
  â•‘    â”‚  (defn validate [data]                                      â”‚       â•‘
  â•‘    â”‚    (s/valid? ::grain-spec data))                            â”‚       â•‘
  â•‘    â”‚                                                             â”‚       â•‘
  â•‘    â”‚  old spec validation...                                     â”‚       â•‘
  â•‘    â”‚  data leaps through types                                   â”‚       â•‘
  â•‘    â”‚  compiler's silence!                                        â”‚       â•‘
  â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â•‘
  â•‘                                                                           â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
       .-""-.
      / _  _ \\         Welcome to the Grain Network Type System!
     |  â€¢  â€¢  |        
      \\  â–¼  /         This is your friendly car manual for strong typing
       '-..-'          in the grain6 ecosystem. Think of types as traffic
         ||            rules - they keep your data safe on the highway!
        /|\\           
       / | \\          
      
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  ğŸ“š TABLE OF CONTENTS (Jump to Line Numbers!)
  
    1. Basic Types ..................... Line 100
    2. Composite Types ................. Line 250  
    3. Process Types ................... Line 400
    4. Network Types ................... Line 550
    5. Temporal Types .................. Line 700
    6. Validation Functions ............ Line 850
  
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  "
  (:require [clojure.spec.alpha :as s]
            [clojure.string :as str]))

;;
;;  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
;;  â”ƒ                                                                      â”ƒ
;;  â”ƒ   ğŸŒ¸  S E C T I O N   1 :   B A S I C   T Y P E S  ğŸŒ¸               â”ƒ
;;  â”ƒ                                                                      â”ƒ
;;  â”ƒ       "In the cicada's cry                                           â”ƒ
;;  â”ƒ        No sign can foretell                                          â”ƒ
;;  â”ƒ        How soon it must die."                                        â”ƒ
;;  â”ƒ                                                                      â”ƒ
;;  â”ƒ   Types are fleeting, but specs are forever!                        â”ƒ
;;  â”ƒ                                                                      â”ƒ
;;  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
;;

;; â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;; â•‘  ::sheaf-id - The Identity of a Grain Sheaf                          â•‘
;; â•‘                                                                       â•‘
;; â•‘  Think of this like a license plate for your car:                    â•‘
;; â•‘    â€¢ Must be unique (no two cars have same plate!)                   â•‘
;; â•‘    â€¢ Must follow a pattern (letters and numbers only)                â•‘
;; â•‘    â€¢ Must be readable (3-30 characters)                              â•‘
;; â•‘                                                                       â•‘
;; â•‘  Example: "kae3g-sheaf-1"                                            â•‘
;; â•‘                                                                       â•‘
;; â•‘      ğŸš— â†’ [kae3g-sheaf-1] â†’ ğŸŒ¾                                       â•‘
;; â•‘                                                                       â•‘
;; â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

(s/def ::sheaf-id
  (s/and string?
         #(re-matches #"^[a-z0-9-]{3,30}$" %)
         #(not (str/starts-with? % "-"))
         #(not (str/ends-with? % "-"))))

;;
;;     â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
;;    â—€ ğŸŒ VISUAL EXAMPLE: Valid vs Invalid Sheaf IDs ğŸŒ â–¶
;;     â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
;;
;;     âœ… VALID:                    âŒ INVALID:
;;     
;;     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
;;     â”‚ kae3g-sheaf  â”‚            â”‚ KAE3G-SHEAF  â”‚  (uppercase!)
;;     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
;;     
;;     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
;;     â”‚ grain6-core  â”‚            â”‚ -grain6-     â”‚  (starts with -)
;;     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
;;     
;;     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
;;     â”‚ sheaf-1-of-88â”‚            â”‚ sh           â”‚  (too short!)
;;     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
;;
;;     â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
;;

;; â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
;; â”‚  ::grainpath - The Unique Path to Grain Content                     â”‚
;; â”‚                                                                       â”‚
;; â”‚  Like a street address for your house! ğŸ                             â”‚
;; â”‚                                                                       â”‚
;; â”‚  Format: /year/month/day/content-name                                â”‚
;; â”‚                                                                       â”‚
;; â”‚      ğŸ“ /12025-10-23--0415--PDT--moon-vishakha--asc-gem000           â”‚
;; â”‚         â””â”€â”¬â”€â”˜ â””â”¬â”˜â””â”¬â”˜  â””â”¬â”€â”˜  â””â”€â”¬â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚
;; â”‚          year  mo da  time   tz      moon phase      ascendant       â”‚
;; â”‚                                                                       â”‚
;; â”‚  Each grainpath is UNIQUE in space and time! ğŸŒŒâ°                    â”‚
;; â”‚                                                                       â”‚
;; â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

(s/def ::grainpath
  (s/and string?
         #(str/starts-with? % "/")
         #(re-matches #"^/([a-z0-9-]+/?)*$" %)))

;;
;;   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;;   â•‘                                                                   â•‘
;;   â•‘         ğŸŒ™ GRAINTIME - Temporal Awareness Spec ğŸŒ™                 â•‘
;;   â•‘                                                                   â•‘
;;   â•‘   "The light of a candle                                          â•‘
;;   â•‘    Is transferred to another candleâ€”                              â•‘
;;   â•‘    Spring twilight"                                               â•‘
;;   â•‘                                                                   â•‘
;;   â•‘   Time flows from moment to moment...                             â•‘
;;   â•‘   Each timestamp lights the next...                               â•‘
;;   â•‘   now == next + 1                                                 â•‘
;;   â•‘                                                                   â•‘
;;   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;

(s/def ::graintime
  (s/and string?
         #(re-matches #"^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$" %)))

;;
;;     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
;;     â”‚                                                           â”‚
;;     â”‚   â° GRAINTIME CLOCK VISUALIZATION â°                     â”‚
;;     â”‚                                                           â”‚
;;     â”‚          âŒš 2025-10-23T04:15:00Z âŒš                        â”‚
;;     â”‚                                                           â”‚
;;     â”‚              12                    Past                  â”‚
;;     â”‚            â†—  â†‘  â†–                  â¬†                    â”‚
;;     â”‚         9  â†  â€¢  â†’  3         â”€â”€â”€â”€â”€â”€â€¢â”€â”€â”€â”€â”€â”€ Future       â”‚
;;     â”‚            â†™  â†“  â†˜                                       â”‚
;;     â”‚              6                    Now                    â”‚
;;     â”‚                                                           â”‚
;;     â”‚      Each tick is eternal!                               â”‚
;;     â”‚      Each moment is a grain!                             â”‚
;;     â”‚                                                           â”‚
;;     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
;;

;; â˜…â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â˜…
;; â˜…                                                                   â˜…
;; â˜…     ::counter-88 - The Philosophy of 88 in Type Form             â˜…
;; â˜…                                                                   â˜…
;; â˜…        88 Ã— 10^0 = 88        (Individual grain)                  â˜…
;; â˜…        88 Ã— 10^1 = 880       (Small bundle)                      â˜…
;; â˜…        88 Ã— 10^2 = 8,800     (Large sheaf)                       â˜…
;; â˜…        88 Ã— 10^3 = 88,000    (Warehouse)                         â˜…
;; â˜…        88 Ã— 10^n = âˆ         (The whole grain!)                  â˜…
;; â˜…                                                                   â˜…
;; â˜…â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â˜…

(s/def ::counter-88
  (s/and integer?
         #(or (= % 88)
              (zero? (mod % 88)))))

;;
;;   ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾
;;   ğŸŒ¾                                                            ğŸŒ¾
;;   ğŸŒ¾    VISUAL: How 88 Counter Works in Practice               ğŸŒ¾
;;   ğŸŒ¾                                                            ğŸŒ¾
;;   ğŸŒ¾    [â€¢] = 1 grain                                          ğŸŒ¾
;;   ğŸŒ¾                                                            ğŸŒ¾
;;   ğŸŒ¾    88 grains:                                             ğŸŒ¾
;;   ğŸŒ¾    [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢]                ğŸŒ¾
;;   ğŸŒ¾    [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢]                ğŸŒ¾
;;   ğŸŒ¾    [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢]                  ğŸŒ¾
;;   ğŸŒ¾                                                            ğŸŒ¾
;;   ğŸŒ¾    176 grains (88 Ã— 2):                                   ğŸŒ¾
;;   ğŸŒ¾    [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] Ã— 17 + [â€¢â€¢â€¢â€¢â€¢â€¢]                          ğŸŒ¾
;;   ğŸŒ¾                                                            ğŸŒ¾
;;   ğŸŒ¾    âˆ grains (88 Ã— âˆ):                                     ğŸŒ¾
;;   ğŸŒ¾    [âˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆâˆ]                       ğŸŒ¾
;;   ğŸŒ¾                                                            ğŸŒ¾
;;   ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾
;;

;;
;;  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
;;  â”ƒ                                                                   â”ƒ
;;  â”ƒ   ğŸŒ¸  S E C T I O N   2 :   C O M P O S I T E   T Y P E S  ğŸŒ¸    â”ƒ
;;  â”ƒ                                                                   â”ƒ
;;  â”ƒ       "From the bough                                             â”ƒ
;;  â”ƒ        Floating downriver,                                        â”ƒ
;;  â”ƒ        Insect singing."                                           â”ƒ
;;  â”ƒ                                                                   â”ƒ
;;  â”ƒ   Simple types flow together into complex structures!            â”ƒ
;;  â”ƒ                                                                   â”ƒ
;;  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
;;

;; â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;; â•‘  ::service-name - The Name of a Grain Service                   â•‘
;; â•‘                                                                  â•‘
;; â•‘  Like naming your pet! ğŸ•                                       â•‘
;; â•‘    â€¢ Clear and descriptive                                      â•‘
;; â•‘    â€¢ Easy to remember                                           â•‘
;; â•‘    â€¢ Unique within your sheaf                                   â•‘
;; â•‘                                                                  â•‘
;; â•‘  Examples:                                                       â•‘
;; â•‘    "web-server"     - serves web pages                          â•‘
;; â•‘    "db-postgres"    - database service                          â•‘
;; â•‘    "worker-queue"   - processes background jobs                 â•‘
;; â•‘                                                                  â•‘
;; â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

(s/def ::service-name
  (s/and string?
         #(re-matches #"^[a-z0-9-]{3,30}$" %)))

;; â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
;; â”‚  ::command - The Command to Run a Service                      â”‚
;; â”‚                                                                  â”‚
;; â”‚  Like telling your car where to drive! ğŸš—                      â”‚
;; â”‚                                                                  â”‚
;; â”‚  Format: executable + arguments                                 â”‚
;; â”‚                                                                  â”‚
;; â”‚  Examples:                                                       â”‚
;; â”‚    "/usr/bin/nginx -c /etc/nginx/nginx.conf"                   â”‚
;; â”‚    "java -jar app.jar"                                          â”‚
;; â”‚    "python3 server.py --port 8080"                              â”‚
;; â”‚                                                                  â”‚
;; â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

(s/def ::command
  (s/and string?
         not-empty))

;;
;;     â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;;     â•‘                                                              â•‘
;;     â•‘   ğŸ­ RESTART POLICY - How Services Handle Crashes ğŸ­        â•‘
;;     â•‘                                                              â•‘
;;     â•‘   Imagine your service is a performer on stage:             â•‘
;;     â•‘                                                              â•‘
;;     â•‘   :always    â†’ ğŸ”„ "The show must go on!"                    â•‘
;;     â•‘                Always restart, no matter what               â•‘
;;     â•‘                                                              â•‘
;;     â•‘   :on-failure â†’ âš ï¸  "Only if something went wrong"          â•‘
;;     â•‘                 Restart only on errors                      â•‘
;;     â•‘                                                              â•‘
;;     â•‘   :never     â†’ ğŸ›‘ "One performance only"                    â•‘
;;     â•‘                Never restart automatically                  â•‘
;;     â•‘                                                              â•‘
;;     â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;

(s/def ::restart-policy
  #{:always :on-failure :never})

;;
;;     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
;;     â”‚                                                          â”‚
;;     â”‚   VISUAL: Restart Policy in Action                      â”‚
;;     â”‚                                                          â”‚
;;     â”‚   Service: web-server                                   â”‚
;;     â”‚   Policy: :always                                       â”‚
;;     â”‚                                                          â”‚
;;     â”‚   Timeline:                                             â”‚
;;     â”‚                                                          â”‚
;;     â”‚   0:00  [ğŸŸ¢ START]  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
;;     â”‚   1:00  [ğŸ’¥ CRASH]                                      â”‚
;;     â”‚   1:01  [ğŸ”„ RESTART] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚
;;     â”‚   2:00  [ğŸ’¥ CRASH]                                      â”‚
;;     â”‚   2:01  [ğŸ”„ RESTART] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚
;;     â”‚   3:00  [ğŸŸ¢ RUNNING] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’                â”‚
;;     â”‚                                                          â”‚
;;     â”‚   The grain always grows back! ğŸŒ¾                       â”‚
;;     â”‚                                                          â”‚
;;     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
;;

;; â˜…â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â˜…
;; â˜…  ::dependencies - Services that must start first               â˜…
;; â˜…                                                                 â˜…
;; â˜…  Like a recipe! ğŸ³                                             â˜…
;; â˜…  You need seeds before you can make an frittata!                â˜…
;; â˜…                                                                 â˜…
;; â˜…  Example dependency chain:                                     â˜…
;; â˜…                                                                 â˜…
;; â˜…    db-postgres  (no dependencies)                              â˜…
;; â˜…         â†“                                                       â˜…
;; â˜…    api-server   (depends on: db-postgres)                      â˜…
;; â˜…         â†“                                                       â˜…
;; â˜…    web-frontend (depends on: api-server)                       â˜…
;; â˜…                                                                 â˜…
;; â˜…  Start order: 1. db-postgres                                   â˜…
;; â˜…               2. api-server                                     â˜…
;; â˜…               3. web-frontend                                   â˜…
;; â˜…                                                                 â˜…
;; â˜…â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â˜…

(s/def ::dependencies
  (s/coll-of ::service-name :distinct true))

;;
;;   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;;   â•‘                                                                  â•‘
;;   â•‘     ğŸ¼ SERVICE CONFIG - The Complete Musical Score ğŸ¼           â•‘
;;   â•‘                                                                  â•‘
;;   â•‘   A service config is like sheet music for an orchestra:        â•‘
;;   â•‘                                                                  â•‘
;;   â•‘   Required (must have):                                         â•‘
;;   â•‘     ::command         - The melody (what to play)              â•‘
;;   â•‘     ::restart-policy  - The tempo (how to handle mistakes)     â•‘
;;   â•‘                                                                  â•‘
;;   â•‘   Optional (nice to have):                                      â•‘
;;   â•‘     ::dependencies    - The harmony (what plays first)         â•‘
;;   â•‘                                                                  â•‘
;;   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;

(s/def ::service-config
  (s/keys :req [::command ::restart-policy]
          :opt [::dependencies]))

;;
;;     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;     
;;     ğŸ“ EXAMPLE: Complete Service Configuration ğŸ“
;;     
;;     {:grainlib.ascii-art-specs/command "nginx -g daemon off"
;;      :grainlib.ascii-art-specs/restart-policy :always
;;      :grainlib.ascii-art-specs/dependencies ["db-postgres" "redis"]}
;;     
;;     This config says:
;;       â€¢ Run nginx web server
;;       â€¢ Always restart if it crashes
;;       â€¢ Wait for database and redis first
;;     
;;     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;

;;
;;  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   ğŸŒ¸  S E C T I O N   3 :   P R O C E S S   T Y P E S  ğŸŒ¸     â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ       "Temple bells die out.                                  â”ƒ
;;  â”ƒ        The fragrant blossoms remain.                          â”ƒ
;;  â”ƒ        A perfect evening!"                                    â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   Processes come and go, but the system persists!            â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
;;

;; â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;; â•‘  ::service-status - Is the Service Running?                   â•‘
;; â•‘                                                                â•‘
;; â•‘  Three states, like a traffic light: ğŸš¦                       â•‘
;; â•‘                                                                â•‘
;; â•‘    ğŸŸ¢ :running  - All good! Service is working               â•‘
;; â•‘    ğŸ”´ :stopped  - Service is off (intentionally)             â•‘
;; â•‘    ğŸŸ¡ :failed   - Uh oh! Something went wrong                â•‘
;; â•‘                                                                â•‘
;; â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

(s/def ::status
  #{:running :stopped :failed})

;; â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
;; â”‚  ::pid - Process ID (The Service's Badge Number)             â”‚
;; â”‚                                                                â”‚
;; â”‚  Like a detective's badge number! ğŸ•µï¸                        â”‚
;; â”‚  Every running process has a unique PID.                      â”‚
;; â”‚                                                                â”‚
;; â”‚  Example: 42, 1337, 9001                                      â”‚
;; â”‚                                                                â”‚
;; â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

(s/def ::pid
  (s/and integer?
         pos?))

;; â˜…â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â˜…
;; â˜…  ::uptime - How Long Has Service Been Running?                â˜…
;; â˜…                                                                 â˜…
;; â˜…  Measured in seconds! â±ï¸                                       â˜…
;; â˜…                                                                 â˜…
;; â˜…  Visual Timeline:                                              â˜…
;; â˜…                                                                 â˜…
;; â˜…  0s â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ âˆs        â˜…
;; â˜…  ğŸŸ¢                                                             â˜…
;; â˜…  START                                                         â˜…
;; â˜…                                                                 â˜…
;; â˜…  Examples:                                                     â˜…
;; â˜…    60s    = 1 minute                                           â˜…
;; â˜…    3600s  = 1 hour                                             â˜…
;; â˜…    86400s = 1 day                                              â˜…
;; â˜…    âˆs     = forever! (the dream!)                              â˜…
;; â˜…                                                                 â˜…
;; â˜…â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â˜…

(s/def ::uptime
  (s/and integer?
         #(>= % 0)))

;;
;;     â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;;     â•‘                                                          â•‘
;;     â•‘   ğŸ’€ EXIT CODE - How Did the Process Die? ğŸ’€           â•‘
;;     â•‘                                                          â•‘
;;     â•‘   Like a final message from a dying warrior:            â•‘
;;     â•‘                                                          â•‘
;;     â•‘   0   â†’ âœ… "I lived a good life" (success!)            â•‘
;;     â•‘   1   â†’ âŒ "General error"                             â•‘
;;     â•‘   2   â†’ âŒ "Misuse of shell command"                   â•‘
;;     â•‘   126 â†’ âŒ "Command cannot execute"                    â•‘
;;     â•‘   127 â†’ âŒ "Command not found"                         â•‘
;;     â•‘   130 â†’ âš ï¸  "Terminated by Ctrl+C"                     â•‘
;;     â•‘   137 â†’ ğŸ’€ "Killed (SIGKILL)"                          â•‘
;;     â•‘                                                          â•‘
;;     â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;

(s/def ::exit-code
  (s/and integer?
         #(<= 0 % 255)))

;; â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
;; â”‚  ::error-message - What Went Wrong?                         â”‚
;; â”‚                                                               â”‚
;; â”‚  A message explaining the error, like a diary entry:         â”‚
;; â”‚                                                               â”‚
;; â”‚  "Connection refused to database on port 5432"              â”‚
;; â”‚  "Out of memory - cannot allocate buffer"                   â”‚
;; â”‚  "Permission denied: cannot write to /var/log"              â”‚
;; â”‚                                                               â”‚
;; â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

(s/def ::error-message
  (s/and string?
         not-empty))

;;
;;   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;;   â•‘                                                                 â•‘
;;   â•‘     ğŸ¯ COMPLETE SERVICE STATUS - The Full Picture ğŸ¯           â•‘
;;   â•‘                                                                 â•‘
;;   â•‘   Like a health check at the doctor's office! ğŸ¥              â•‘
;;   â•‘                                                                 â•‘
;;   â•‘   Required (always present):                                   â•‘
;;   â•‘     ::service-name  - "Who are you?"                          â•‘
;;   â•‘     ::status        - "How are you feeling?"                  â•‘
;;   â•‘                                                                 â•‘
;;   â•‘   Optional (when applicable):                                  â•‘
;;   â•‘     ::pid           - "What's your ID number?"                â•‘
;;   â•‘     ::uptime        - "How long have you been alive?"         â•‘
;;   â•‘     ::exit-code     - "How did you die?" (if dead)            â•‘
;;   â•‘     ::error-message - "What went wrong?" (if failed)          â•‘
;;   â•‘                                                                 â•‘
;;   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;

(s/def ::service-status-response
  (s/keys :req [::service-name ::status]
          :opt [::pid ::uptime ::exit-code ::error-message]))

;;
;;     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;     
;;     ğŸ“Š EXAMPLE: Service Status Responses ğŸ“Š
;;     
;;     HEALTHY SERVICE:
;;     {:grainlib.ascii-art-specs/service-name "web-server"
;;      :grainlib.ascii-art-specs/status :running
;;      :grainlib.ascii-art-specs/pid 1337
;;      :grainlib.ascii-art-specs/uptime 86400}  ; 1 day!
;;     
;;     FAILED SERVICE:
;;     {:grainlib.ascii-art-specs/service-name "db-postgres"
;;      :grainlib.ascii-art-specs/status :failed
;;      :grainlib.ascii-art-specs/exit-code 1
;;      :grainlib.ascii-art-specs/error-message "Connection refused"}
;;     
;;     STOPPED SERVICE:
;;     {:grainlib.ascii-art-specs/service-name "worker-queue"
;;      :grainlib.ascii-art-specs/status :stopped}
;;     
;;     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;

;;
;;  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   ğŸŒ¸  S E C T I O N   4 :   A P I   F U N C T I O N S  ğŸŒ¸     â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ       "First autumn morning                                   â”ƒ
;;  â”ƒ        The mirror I stare into                                â”ƒ
;;  â”ƒ        Shows my father's face."                               â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   Functions mirror our intentions into running systems!      â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
;;

;; â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;; â•‘  start-service - Launch a New Service ğŸš€                      â•‘
;; â•‘                                                                â•‘
;; â•‘  Like pressing the ignition in your car! ğŸ”‘                  â•‘
;; â•‘                                                                â•‘
;; â•‘  Input:                                                        â•‘
;; â•‘    â€¢ service-name (string) - What to call it                 â•‘
;; â•‘    â€¢ config (map)          - How to run it                   â•‘
;; â•‘                                                                â•‘
;; â•‘  Output:                                                       â•‘
;; â•‘    â€¢ boolean - true if started, false if failed              â•‘
;; â•‘                                                                â•‘
;; â•‘  Example:                                                      â•‘
;; â•‘    (start-service "web-server"                                â•‘
;; â•‘                   {:command "nginx"                           â•‘
;; â•‘                    :restart-policy :always})                  â•‘
;; â•‘    => true âœ…                                                 â•‘
;; â•‘                                                                â•‘
;; â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

(s/fdef start-service
  :args (s/cat :service-name ::service-name
               :config ::service-config)
  :ret boolean?)

;;
;;     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
;;     â”‚                                                         â”‚
;;     â”‚   ğŸ¬ VISUAL: Starting a Service ğŸ¬                     â”‚
;;     â”‚                                                         â”‚
;;     â”‚   Before:                                              â”‚
;;     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
;;     â”‚   â”‚  Services:   â”‚                                     â”‚
;;     â”‚   â”‚  (empty)     â”‚                                     â”‚
;;     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
;;     â”‚                                                         â”‚
;;     â”‚   (start-service "web-server" {...})                   â”‚
;;     â”‚            â†“                                            â”‚
;;     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
;;     â”‚   â”‚  Services:   â”‚                                     â”‚
;;     â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                                     â”‚
;;     â”‚   â”‚  â”‚web-serverâ”‚â”‚ ğŸŸ¢ RUNNING                         â”‚
;;     â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                                     â”‚
;;     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
;;     â”‚                                                         â”‚
;;     â”‚   After: Returns true âœ…                               â”‚
;;     â”‚                                                         â”‚
;;     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
;;

;; â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
;; â”‚  stop-service - Gracefully Stop a Service ğŸ›‘                â”‚
;; â”‚                                                               â”‚
;; â”‚  Like turning off your car engine properly! ğŸ”§              â”‚
;; â”‚                                                               â”‚
;; â”‚  Input:                                                       â”‚
;; â”‚    â€¢ service-name (string) - Which service to stop          â”‚
;; â”‚                                                               â”‚
;; â”‚  Output:                                                      â”‚
;; â”‚    â€¢ boolean - true if stopped, false if failed             â”‚
;; â”‚                                                               â”‚
;; â”‚  Example:                                                     â”‚
;; â”‚    (stop-service "web-server")                               â”‚
;; â”‚    => true âœ…                                                â”‚
;; â”‚                                                               â”‚
;; â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

(s/fdef stop-service
  :args (s/cat :service-name ::service-name)
  :ret boolean?)

;; â˜…â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â˜…
;; â˜…  service-status - Check How a Service is Doing ğŸ“Š             â˜…
;; â˜…                                                                 â˜…
;; â˜…  Like asking "How are you feeling today?" ğŸ¤”                  â˜…
;; â˜…                                                                 â˜…
;; â˜…  Input:                                                        â˜…
;; â˜…    â€¢ service-name (string) - Which service to check          â˜…
;; â˜…                                                                 â˜…
;; â˜…  Output:                                                       â˜…
;; â˜…    â€¢ map - Complete status information                        â˜…
;; â˜…                                                                 â˜…
;; â˜…  Example:                                                      â˜…
;; â˜…    (service-status "web-server")                              â˜…
;; â˜…    => {:service-name "web-server"                             â˜…
;; â˜…        :status :running                                        â˜…
;; â˜…        :pid 1337                                               â˜…
;; â˜…        :uptime 86400}                                          â˜…
;; â˜…                                                                 â˜…
;; â˜…â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â˜…

(s/fdef service-status
  :args (s/cat :service-name ::service-name)
  :ret ::service-status-response)

;;
;;   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;;   â•‘                                                             â•‘
;;   â•‘     ğŸ­ THE THREE ACTS OF SERVICE MANAGEMENT ğŸ­             â•‘
;;   â•‘                                                             â•‘
;;   â•‘   Act 1: BIRTH ğŸŒ±                                          â•‘
;;   â•‘     (start-service "my-app" config)                        â•‘
;;   â•‘     Service comes to life!                                 â•‘
;;   â•‘                                                             â•‘
;;   â•‘   Act 2: LIFE ğŸŒ¿                                           â•‘
;;   â•‘     (service-status "my-app")                              â•‘
;;   â•‘     Check if service is healthy                            â•‘
;;   â•‘                                                             â•‘
;;   â•‘   Act 3: DEATH ğŸ‚                                          â•‘
;;   â•‘     (stop-service "my-app")                                â•‘
;;   â•‘     Service gracefully exits                               â•‘
;;   â•‘                                                             â•‘
;;   â•‘   And the cycle continues... now == next + 1               â•‘
;;   â•‘                                                             â•‘
;;   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;

;;
;;  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   ğŸŒ¸  S E C T I O N   5 :   V A L I D A T I O N  ğŸŒ¸          â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ       "Even in Kyotoâ€”                                         â”ƒ
;;  â”ƒ        hearing the cuckoo's cryâ€”                              â”ƒ
;;  â”ƒ        I long for Kyoto."                                     â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   Validation brings us home to correct data!                 â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
;;

(defn validate
  "
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘                                                                  â•‘
  â•‘   ğŸ” VALIDATE - Check if Data Matches Spec ğŸ”                   â•‘
  â•‘                                                                  â•‘
  â•‘   Like a bouncer at a nightclub! ğŸ’‚                            â•‘
  â•‘   Only data that matches the dress code gets in!                â•‘
  â•‘                                                                  â•‘
  â•‘   Usage:                                                         â•‘
  â•‘     (validate ::sheaf-id \"kae3g-sheaf\")                       â•‘
  â•‘     => true âœ…                                                  â•‘
  â•‘                                                                  â•‘
  â•‘     (validate ::sheaf-id \"INVALID-ID\")                        â•‘
  â•‘     => false âŒ                                                 â•‘
  â•‘                                                                  â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  "
  [spec data]
  (s/valid? spec data))

(defn explain-validation
  "
  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
  â”‚                                                                  â”‚
  â”‚   ğŸ“ EXPLAIN VALIDATION - Why Did It Fail? ğŸ“                  â”‚
  â”‚                                                                  â”‚
  â”‚   Like a teacher explaining your mistakes! ğŸ‘¨â€ğŸ«                â”‚
  â”‚   Shows you exactly what went wrong.                            â”‚
  â”‚                                                                  â”‚
  â”‚   Usage:                                                         â”‚
  â”‚     (explain-validation ::sheaf-id \"INVALID\")                 â”‚
  â”‚     => Prints helpful error explanation!                        â”‚
  â”‚                                                                  â”‚
  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
  "
  [spec data]
  (s/explain spec data))

;;
;;     â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
;;     â•‘                                                          â•‘
;;     â•‘   ğŸ“ LEARNING MOMENT: How to Use These Functions ğŸ“    â•‘
;;     â•‘                                                          â•‘
;;     â•‘   Step 1: Try to validate                               â•‘
;;     â•‘     (validate ::sheaf-id my-id)                         â•‘
;;     â•‘                                                          â•‘
;;     â•‘   Step 2: If false, explain why                         â•‘
;;     â•‘     (explain-validation ::sheaf-id my-id)               â•‘
;;     â•‘                                                          â•‘
;;     â•‘   Step 3: Fix your data                                 â•‘
;;     â•‘     Change uppercase to lowercase                       â•‘
;;     â•‘     Remove special characters                           â•‘
;;     â•‘     Check length requirements                           â•‘
;;     â•‘                                                          â•‘
;;     â•‘   Step 4: Validate again                                â•‘
;;     â•‘     (validate ::sheaf-id fixed-id)                      â•‘
;;     â•‘     => true âœ…                                          â•‘
;;     â•‘                                                          â•‘
;;     â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;

;;
;;  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   ğŸŒ¸  E P I L O G U E :   T H E   W A Y   O F   T Y P E S  ğŸŒ¸ â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ       "You rice-field maidens!                                â”ƒ
;;  â”ƒ        The only things not muddy                              â”ƒ
;;  â”ƒ        Are the songs you sing."                               â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   In a world of chaos, types keep our code clean!            â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   Remember:                                                    â”ƒ
;;  â”ƒ     â€¢ Types are traffic rules for data ğŸš¦                    â”ƒ
;;  â”ƒ     â€¢ Specs are friendly gatekeepers ğŸ’‚                      â”ƒ
;;  â”ƒ     â€¢ Validation is learning, not punishment ğŸ“              â”ƒ
;;  â”ƒ     â€¢ Errors are teachers in disguise ğŸ‘¨â€ğŸ«                   â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   May your data always flow true! ğŸŒ¾                          â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”ƒ   now == next + 1                                              â”ƒ
;;  â”ƒ                                                                â”ƒ
;;  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
;;

;;     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;;     
;;         ğŸŒ¾ THE GRAIN NETWORK MANIFESTO ğŸŒ¾
;;     
;;         From granules to grains to THE WHOLE GRAIN
;;     
;;         â€¢ Local Control, Global Intent
;;         â€¢ Purpose-Built Over Generic  
;;         â€¢ Declarative Over Imperative
;;         â€¢ Template/Personal Everywhere
;;         â€¢ Real Resources Matter
;;         â€¢ Pragmatic Branding Over Dogmatic Renaming
;;     
;;         88 Ã— 10^n scaling into eternity
;;     
;;         now == next + 1
;;     
;;     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

;; End of grainlib.ascii-art-specs namespace
;; Thank you for reading! May your types be strong and your bugs be few! ğŸ›âŒ

