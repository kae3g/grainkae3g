commit bde20fdaaa104fd5d9325432a91b7a2390f4d3f6
Author: Your Name <you@example.com>
Date:   Wed Jun 23 21:49:12 2021 -0700

    e300.cn7130_ubnt_edgerouter{6,12} (edgerouter-6,12) support from https://github.com/dbro/openwrt/commit/d0a8443c2499b4c1091f2dbcc8d4942265b630f6

diff --git a/arch/mips/boot/dts/cavium-octeon/Makefile b/arch/mips/boot/dts/cavium-octeon/Makefile
index 954788f5b6e3..1050161fe9b2 100644
--- a/arch/mips/boot/dts/cavium-octeon/Makefile
+++ b/arch/mips/boot/dts/cavium-octeon/Makefile
@@ -4,4 +4,6 @@ dtb-$(CONFIG_CAVIUM_OCTEON_SOC)	+= ubnt_e100.dtb
 dtb-$(CONFIG_CAVIUM_OCTEON_SOC)	+= ubnt_e120.dtb
 dtb-$(CONFIG_CAVIUM_OCTEON_SOC)	+= cn7130_ubnt_edgerouter4.dtb
+dtb-$(CONFIG_CAVIUM_OCTEON_SOC)	+= cn7130_ubnt_edgerouter_6p.dtb
+dtb-$(CONFIG_CAVIUM_OCTEON_SOC)	+= cn7130_ubnt_edgerouter_12.dtb
 
 obj-$(CONFIG_BUILTIN_DTB)	+= $(addsuffix .o, $(dtb-y))
diff --git a/arch/mips/boot/dts/cavium-octeon/cn7130_ubnt_edgerouter-e300.dtsi b/arch/mips/boot/dts/cavium-octeon/cn7130_ubnt_edgerouter-e300.dtsi
new file mode 100644
index 000000000000..7d4c7f0de9d2
--- /dev/null
+++ b/arch/mips/boot/dts/cavium-octeon/cn7130_ubnt_edgerouter-e300.dtsi
@@ -0,0 +1,205 @@
+// SPDX-License-Identifier: GPL-2.0-or-later OR MIT
+
+#include "cn71xx.dtsi"
+
+#include <dt-bindings/gpio/gpio.h>
+#include <dt-bindings/input/input.h>
+
+/ {
+	compatible = "ubnt,edgerouter-e300", "cavium,cn7130";
+	model = "Ubiquiti EdgeRouter E300 series";
+
+	aliases {
+		/* White + Blinking Blue */
+		led-boot = &led_power_white;
+		/* Blue + Blinking White */
+		led-failsafe = &led_power_blue;
+		/* Constant Blue */
+		led-running = &led_power_blue;
+		/* Blue + Blinking White */
+		led-upgrade = &led_power_blue;
+	};
+
+	memory@0 {
+		device_type = "memory";
+		reg = <0x0 0x00000000>,
+		      <0x0 0x10000000>,
+		      <0x0 0x20000000>,
+		      <0x0 0x30000000>;
+	};
+
+	leds {
+		compatible = "gpio-leds";
+
+		led_power_blue: power_blue {
+			label = "blue:power";
+			gpios = <&gpio 15 GPIO_ACTIVE_LOW>;
+		};
+
+		led_power_white: power_white {
+			label = "white:power";
+			gpios = <&gpio 17 GPIO_ACTIVE_LOW>;
+		};
+	};
+
+	keys {
+		compatible = "gpio-keys-polled";
+		poll-interval = <20>;
+
+		reset {
+			label = "reset";
+			linux,code = <KEY_RESTART>;
+			gpios = <&gpio 11 GPIO_ACTIVE_LOW>;
+			debounce-interval = <60>;
+		};
+	};
+
+	sfp: sfp {
+		compatible = "sff,sfp";
+		i2c-bus = <&twsi0>;
+		/* Pins 12, 13 and 14 gets pulled low when SFP is plugged in */
+		mod-def0-gpio = <&gpio 12 GPIO_ACTIVE_LOW>;
+	};
+};
+
+&uart0 {
+	status = "okay";
+};
+
+&usb0 {
+	status = "okay";
+};
+
+&xhci0 {
+	status = "okay";
+	dr_mode = "host";
+};
+
+&twsi0 {
+	status = "okay";
+
+	sfp_eeprom@50 {
+		compatible = "at,24c04";
+		reg = <0x50>;
+	};
+
+	sfp_eeprom@51 {
+		compatible = "at,24c04";
+		reg = <0x51>;
+	};
+};
+
+&spi {
+	status = "okay";
+
+	flash@0 {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "Macronix,mx25l6405d", "spi-flash";
+		reg = <0>;
+		spi-max-frequency = <25000000>;
+
+		partition@0 {
+			label = "boot0";
+			read-only;
+			reg = <0x000000 0x300000>;
+		};
+
+		partition@300000 {
+			label = "dummy";
+			read-only;
+			reg = <0x300000 0x100000>;
+		};
+
+		eeprom: partition@400000 {
+			label = "eeprom";
+			read-only;
+			reg = <0x400000 0x10000>;
+		};
+	};
+};
+
+&mmc {
+	status = "okay";
+
+	mmc-slot@0 {
+		compatible = "mmc-slot";
+		reg = <0>;
+		non-removable;
+		max-frequency = <26000000>;
+		voltage-ranges = <3300 3300>;
+		bus-width = <8>;
+	};
+};
+
+&smi0 {
+	status = "okay";
+
+	phy4: ethernet-phy@4 {
+		device_type = "ethernet-phy";
+		interrupts = <17 8>;
+		interrupt-parent = <&gpio>;
+		compatible = "vitesse,vsc8504", "ethernet-phy-ieee802.3-c22";
+		reg = <4>;
+		sfp = <&sfp>;
+	};
+
+	phy5: ethernet-phy@5 {
+		device_type = "ethernet-phy";
+		interrupts = <17 8>;
+		interrupt-parent = <&gpio>;
+		compatible = "vitesse,vsc8504", "ethernet-phy-ieee802.3-c22";
+		reg = <5>;
+	};
+
+	phy6: ethernet-phy@6 {
+		device_type = "ethernet-phy";
+		interrupts = <17 8>;
+		interrupt-parent = <&gpio>;
+		compatible = "vitesse,vsc8504", "ethernet-phy-ieee802.3-c22";
+		reg = <6>;
+	};
+
+	phy7: ethernet-phy@7 {
+		device_type = "ethernet-phy";
+		interrupts = <17 8>;
+		interrupt-parent = <&gpio>;
+		compatible = "vitesse,vsc8504", "ethernet-phy-ieee802.3-c22";
+		reg = <7>;
+	};
+};
+
+&pip {
+	status = "okay";
+
+	interface@0 {
+		status = "okay";
+
+		ethernet@1 {
+			label = "lan0";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy5>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(1)>;
+		};
+
+		ethernet@2 {
+			label = "lan1";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy6>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(2)>;
+		};
+
+		ethernet@3 {
+			label = "lan2";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy7>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(3)>;
+		};
+	};
+};
diff --git a/arch/mips/boot/dts/cavium-octeon/cn7130_ubnt_edgerouter_12.dts b/arch/mips/boot/dts/cavium-octeon/cn7130_ubnt_edgerouter_12.dts
new file mode 100644
index 000000000000..ed83e63d7569
--- /dev/null
+++ b/arch/mips/boot/dts/cavium-octeon/cn7130_ubnt_edgerouter_12.dts
@@ -0,0 +1,185 @@
+// SPDX-License-Identifier: GPL-2.0-or-later OR MIT
+
+// TODO: check to see if ports lan0-7 are grouped separately because they are all part of the internal switch. From the console, interrupt the regular boot process and run the command "mdio list" and "mii device"
+
+#include "cn7130_ubnt_edgerouter-e300.dtsi"
+
+/ {
+	compatible = "ubnt,edgerouter-12", "cavium,cn7130";
+	model = "Ubiquiti EdgeRouter 12";
+};
+
+&smi0 {
+	phy0: ethernet-phy@0 {
+		device_type = "ethernet-phy";
+		compatible = "atheros,ar8033", "ethernet-phy-ieee802.3-c22";
+		cavium,qlm-trim = "6,sgmii";
+		reg = <0>;
+	};
+
+	phy1: ethernet-phy@1 {
+		device_type = "ethernet-phy";
+		compatible = "atheros,ar8033", "ethernet-phy-ieee802.3-c22";
+		cavium,qlm-trim = "6,sgmii";
+		reg = <1>;
+	};
+
+	phy2: ethernet-phy@2 {
+		device_type = "ethernet-phy";
+		compatible = "atheros,ar8033", "ethernet-phy-ieee802.3-c22";
+		cavium,qlm-trim = "6,sgmii";
+		reg = <2>;
+	};
+
+	phy3: ethernet-phy@3 {
+		device_type = "ethernet-phy";
+		compatible = "atheros,ar8033", "ethernet-phy-ieee802.3-c22";
+		cavium,qlm-trim = "6,sgmii";
+		reg = <3>;
+	};
+
+	phy5: ethernet-phy@5 {
+		sfp = <&sfp>;
+	};
+
+	phy8: ethernet-phy@8 {
+		device_type = "ethernet-phy";
+		interrupts = <17 8>;
+		interrupt-parent = <&gpio>;
+		compatible = "vitesse,vsc8514", "ethernet-phy-ieee802.3-c22";
+		reg = <8>;
+	};
+
+	phy9: ethernet-phy@9 {
+		device_type = "ethernet-phy";
+		interrupts = <17 8>;
+		interrupt-parent = <&gpio>;
+		compatible = "vitesse,vsc8514", "ethernet-phy-ieee802.3-c22";
+		reg = <9>;
+	};
+
+	phy10: ethernet-phy@10 {
+		device_type = "ethernet-phy";
+		interrupts = <17 8>;
+		interrupt-parent = <&gpio>;
+		compatible = "vitesse,vsc8514", "ethernet-phy-ieee802.3-c22";
+		reg = <10>;
+	};
+
+	phy11: ethernet-phy@11 {
+		device_type = "ethernet-phy";
+		interrupts = <17 8>;
+		interrupt-parent = <&gpio>;
+		compatible = "vitesse,vsc8514", "ethernet-phy-ieee802.3-c22";
+		reg = <11>;
+	};
+};
+
+&pip {
+	interface@0 {
+		ethernet@0 {
+			label = "lan10";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy4>;
+			mtd-mac-address = <&eeprom 0>;
+		};
+
+		ethernet@1 {
+			label = "lan11";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy5>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(1)>;
+		};
+
+		ethernet@2 {
+			label = "lan0";
+		};
+
+		ethernet@3 {
+			label = "lan1";
+		};
+	};
+
+	interface@1 {
+		status = "okay";
+
+		ethernet@0 {
+			label = "lan2";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy8>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(4)>;
+		};
+
+		ethernet@1 {
+			label = "lan3";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy9>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(5)>;
+		};
+
+		ethernet@2 {
+			label = "lan4";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy10>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(6)>;
+		};
+
+		ethernet@3 {
+			label = "lan5";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy11>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(7)>;
+		};
+	};
+
+	interface@2 {
+		status = "okay";
+
+		ethernet@0 {
+			label = "lan6";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy0>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(8)>;
+		};
+
+		ethernet@1 {
+			label = "lan7";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy1>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(9)>;
+		};
+
+		ethernet@2 {
+			label = "lan8";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy2>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(10)>;
+		};
+
+		ethernet@3 {
+			label = "lan9";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy3>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(11)>;
+		};
+	};
+};
diff --git a/arch/mips/boot/dts/cavium-octeon/cn7130_ubnt_edgerouter_6p.dts b/arch/mips/boot/dts/cavium-octeon/cn7130_ubnt_edgerouter_6p.dts
new file mode 100644
index 000000000000..7d3188592889
--- /dev/null
+++ b/arch/mips/boot/dts/cavium-octeon/cn7130_ubnt_edgerouter_6p.dts
@@ -0,0 +1,60 @@
+// SPDX-License-Identifier: GPL-2.0-or-later OR MIT
+
+#include "cn7130_ubnt_edgerouter-e300.dtsi"
+
+/ {
+	compatible = "ubnt,edgerouter-6p", "cavium,cn7130";
+	model = "Ubiquiti EdgeRouter 6P";
+};
+
+&smi0 {
+	phy8: ethernet-phy@8 {
+		device_type = "ethernet-phy";
+		interrupts = <17 8>;
+		interrupt-parent = <&gpio>;
+		compatible = "vitesse,vsc8514", "ethernet-phy-ieee802.3-c22";
+		reg = <8>;
+	};
+
+	phy9: ethernet-phy@9 {
+		device_type = "ethernet-phy";
+		interrupts = <17 8>;
+		interrupt-parent = <&gpio>;
+		compatible = "vitesse,vsc8514", "ethernet-phy-ieee802.3-c22";
+		reg = <9>;
+	};
+};
+
+&pip {
+	interface@0 {
+		ethernet@0 {
+			label = "lan5";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy4>;
+			mtd-mac-address = <&eeprom 0>;
+		};
+	};
+
+	interface@1 {
+		status = "okay";
+
+		ethernet@0 {
+			label = "lan3";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy8>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(4)>;
+		};
+
+		ethernet@1 {
+			label = "lan4";
+			status = "okay";
+			phy-mode = "sgmii";
+			phy-handle = <&phy9>;
+			mtd-mac-address = <&eeprom 0>;
+			mtd-mac-address-increment = <(5)>;
+		};
+	};
+};
